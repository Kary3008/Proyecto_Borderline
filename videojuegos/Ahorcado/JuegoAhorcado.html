<!doctype html>
<html>
    <head>
      <!-- meta tipos de caracteres especiales en la web -->
      <meta charset="utf-8">
      <!-- optimizar el sitio para moviles -->
      <meta name="MobileOptimizer" content="width"/>
      <!-- optimizacion para cualquier dispositivo -->
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <!-- descripción del sitio web -->
      <meta name="description" content="Sistema online para ayuda y guía de estudiantes y futuros estudiantes, gestión del plantel a través de módulos como son:
      registro de alumnos, reporte de alumnos, Recorrido Virtual de las áreas que conforman al plantel, Desarrollo de Juego Interactivos para el aprendizaje de las distintas carreras que ofrece la institución">
      <!-- palabras claves para el seo -->
      <meta name="keywords" content="Sistema Online, Juego, Videojuego, Juego del Ahorcado, Ecología, Reportes de Asistencia, Recorrido Virtual, Juegos Interactivos, Guía de estudiantes, Conalep Naucalpan 1, Gestión de planteles, Carreras Técnicas">
      <!-- meta para el autor del sitio  -->
      <meta name="autor" content="Borderline 605">
      <!-- el de la marca --->
      <meta name="copyright" content="Borderline & Conactive">
      <meta name="robots" content="index/">
      <link href="../css/bootstrap.min.css" rel="stylesheet" type="text/css">
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
        <title>CONACTIVE</title>
        <link rel="stylesheet" href="css/aho.css">
        <style>
            body{
                margin: 0 auto;
            }
            h1{
                text-align: center;
            }
            #pantalla{
                border: groove 5px #ECE0F8;
                background: #ECE0F8;
            }
            #boton{
                background-color: #CED8F6;
                color: black;
                font-size: 20px;
                text-align: center;
                font-weight: bolder;
                padding: 9px;
                border: solid 2px #CED8F6;
            }
            #boton:hover{ /* Estilo que se activa al pasar el puntero sobre el boton */
                background-color: lightcoral;
                font-size: 22px;
                border: groove 2px red;
            }
        </style>
        </head>
    <body>
      <!--Inicia Navbar-->
      <link rel="stylesheet" type="text/css" href="../pincipal/css/fontello.css">
          <nav class="navbar navbar-expand-lg navbar-light" style="background: linear-gradient(to left, #eac3a3, #95cbc8, #95cbc8);">
            <a href="../../pincipal/principal.php"><img src="../../img1.png" alt="LogoE" style="width: 90px; height: 70px;"></a>

              <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavDropdown" aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
              </button>
                <div class="collapse navbar-collapse" id="navbarNavDropdown">
                    <ul class="navbar-nav ml-auto">
                        <li class="nav-item active">
                          <div class="row justify-content-md-center">
                          <div class="col-md-auto">
                            <nav aria-label="breadcrumb">
                        <ol class="breadcrumb" style="background-color: rgb(255, 255, 255); opacity: 0.3;">
                          <li class="breadcrumb-item"><a href="../../pincipal/principal.php">Inicio</a></li>
                          <li class="breadcrumb-item"><a href="../PaginaVideoJuegos.php">Videojuegos</a></li>
                          <li class="breadcrumb-item active" aria-current="page">Memorama</li>
                        </ol>
                      </nav>
                      </div>
                    </div>
                        </li>
                        <!--Inicia lista despegable-->
                          <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle text-white" href="#" id="opciones" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                              <img src="../../pincipal/img/dino.png" alt="Perfil" style="width: 30px; height:30px; border-radius:50%; ">
                            </a>
                            <div class="dropdown-menu" aria-labelledby="opciones">
                              <a class="dropdown-item" href="../../pincipal/main/busqueda.php"><span class="fas fa-search"></span> Búsqueda</a>
                              <a class="dropdown-item" href="#"><span class="fas fa-question-circle"></span> Ayuda</a>
                              <a class="dropdown-item" href="#" data-toggle="modal" data-target="#ModalCenter"><span class="fas fa-moon"></span> Cerrar sesión</a>
                            </div>
                          </li>
                        <!--Termina lista despegable-->
                  </ul>
                </div>
              </nav>
        <!--Termina navbar-->
        <!--ventana modal cerrar sesion -->
        <div class="modal" tabindex="-1" id="ModalCenter">
          <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
              <div class="modal-header">
                <h5 class="modal-title"><span class="icon-off"></span> Cerrar Sesión </h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                  <span aria-hidden="true">&times;</span>
                </button>
              </div>
              <div class="modal-body">
                <p>¿Deseas cerrar la sesión <?php echo $usuario; ?>?</p>
              </div>
              <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancelar</button>
                <a href="../../pincipal/main/cerrar.php" class="btn btn-danger">Cerrar Sesión</a>
              </div>
            </div>
          </div>
        </div>
        <!--Termina ventana modal-->
        <!--Inicia Juego-->
        <div class="container">
          <h1>CONACTIVE</h1>
          <canvas id="pantalla" width="960px" height="450px"> <!-- etiqueta del canvas con sus medidas en la pantalla -->
              Tu navegador no soporta Canvas.
          </canvas>
          <!-- El boton que nos sirve para recargar la pagina y asi generar una nueva palabra y volver a jugar -->
          <button id="boton" type="reset" onclick="javascript:window.location.reload();">Volver a Jugar</button>
        </div>
        <!--Termina Juego-->
        <script>

            /* Variables */
            var ctx;
            var canvas;
            var palabra;
            var letras = "QWERTYUIOPASDFGHJKLÑZXCVBNM";
            var colorTecla = "#D0A9F5";
            var colorMargen = "#D0A9F5";
            var inicioX = 200;
            var inicioY = 300;
            var lon = 35;
            var margen = 20;
            var pistaText = "";

            /* Arreglos */
            var teclas_array = new Array();
            var letras_array = new Array();
            var palabras_array = new Array();

            /* Variables de control */
            var aciertos = 0;
            var errores = 0;

            /* Palabras */
            palabras_array.push("INFORMATICA");
            palabras_array.push("CONTABILIDAD");
            palabras_array.push("CONALEP");
            palabras_array.push("ALUMNOS");
            palabras_array.push("DOCENTES");
            palabras_array.push("ASISTENCIA");
            palabras_array.push("HOSPITALIDAD");
            palabras_array.push("PLANTELES");
            palabras_array.push("SEMESTRES");


            /* Objetos */
            function Tecla(x, y, ancho, alto, letra){
                this.x = x;
                this.y = y;
                this.ancho = ancho;
                this.alto = alto;
                this.letra = letra;
                this.dibuja = dibujaTecla;
            }

            function Letra(x, y, ancho, alto, letra){
                this.x = x;
                this.y = y;
                this.ancho = ancho;
                this.alto = alto;
                this.letra = letra;
                this.dibuja = dibujaCajaLetra;
                this.dibujaLetra = dibujaLetraLetra;
            }

            /* Funciones */

            /* Dibujar Teclas*/
            function dibujaTecla(){
                ctx.fillStyle = colorTecla;
                ctx.strokeStyle = colorMargen;
                ctx.fillRect(this.x, this.y, this.ancho, this.alto);
                ctx.strokeRect(this.x, this.y, this.ancho, this.alto);

                ctx.fillStyle = "black";
                ctx.font = "bold 20px courier";
                ctx.fillText(this.letra, this.x+this.ancho/2-5, this.y+this.alto/2+5);
            }

            /* Dibua la letra y su caja */
            function dibujaLetraLetra(){
                var w = this.ancho;
                var h = this.alto;
                ctx.fillStyle = "black";
                ctx.font = "bold 40px Courier";
                ctx.fillText(this.letra, this.x+w/2-12, this.y+h/2+14);
            }
            function dibujaCajaLetra(){
                ctx.fillStyle = "white";
                ctx.strokeStyle = "black";
                ctx.fillRect(this.x, this.y, this.ancho, this.alto);
                ctx.strokeRect(this.x, this.y, this.ancho, this.alto);
            }

            /// Funcion para dar una pista la usuario ////
            function pistaFunction(palabra){
                let pista = ""; // Se crea la variable local pista que contendra nuestra frase de pista
                switch(palabra){  // Se crea un switch para poder controlar las pistas segun la palabra
                    case 'INFORMATICA':   // Se debera hacer un case por cada palabra
                        pista = "Carrera en ámbito de la tecnología";
                        break;     // Es importante el break en cada case
                    case 'CONTABILIDAD':   // Se debera hacer un case por cada palabra
                        pista = "Carrera en ámbito financiero";
                        break;     // Es importante el break en cada case
                        case 'CONALEP':   // Se debera hacer un case por cada palabra
                        pista = "Somos Apasionadamente...";
                        break;     // Es importante el break en cada case
                        case 'ALUMNOS':   // Se debera hacer un case por cada palabra
                        pista = "Forman parte de los grupos";
                        break;     // Es importante el break en cada case
                        case 'DOCENTES':   // Se debera hacer un case por cada palabra
                        pista = "Imparten modulos";
                        break;     // Es importante el break en cada case
                        case 'ASISTENCIA':   // Se debera hacer un case por cada palabra
                        pista = "Los alumnos tienen que tomar...";
                        break;     // Es importante el break en cada case
                        case 'HOSPITALIDAD':   // Se debera hacer un case por cada palabra
                        pista = "Carrera en ámbito de turistico";
                        break;     // Es importante el break en cada case
                        case 'PLANTELES':   // Se debera hacer un case por cada palabra
                        pista = "En el Edo. Conalep cuenta con 39...";
                        break;     // Es importante el break en cada case
                        case 'SEMESTRES':   // Se debera hacer un case por cada palabra
                        pista = "Completa los 6... en conalep";
                        break;     // Es importante el break en cada case

                }
                // Pintamos la palabra en el canvas , en este ejemplo se pinta arriba a la izquierda //
                ctx.fillStyle = "black";  // Aqui ponemos el color de la letra
                ctx.font = "bold 20px Rockwell";  // aqui ponemos el tipo y tamaño de la letra
                ctx.fillText(pista, 10, 15);  // aqui ponemos la frase en nuestro caso la variable pista , seguido de la posx y posy
            }


             /* Distribuir nuestro teclado con sus letras respectivas al acomodo de nuestro array */
            function teclado(){
                var ren = 0;
                var col = 0;
                var letra = "";
                var miLetra;
                var x = inicioX;
                var y = inicioY;
                for(var i = 0; i < letras.length; i++){
                    letra = letras.substr(i,1);
                    miLetra = new Tecla(x, y, lon, lon, letra);
                    miLetra.dibuja();
                    teclas_array.push(miLetra);
                    x += lon + margen;
                    col++;
                    if(col==10){
                        col = 0;
                        ren++;
                        if(ren==2){
                            x = 280;
                        } else {
                            x = inicioX;
                        }
                    }
                    y = inicioY + ren * 50;
                }
            }


            /* aqui obtenemos nuestra palabra aleatoriamente y la dividimos en letras */
            function pintaPalabra(){
                var p = Math.floor(Math.random()*palabras_array.length);
                palabra = palabras_array[p];

                pistaFunction(palabra);

                var w = canvas.width;
                var len = palabra.length;
                var ren = 0;
                var col = 0;
                var y = 230;
                var lon = 50;
                var x = (w - (lon+margen) *len)/2;
                for(var i=0; i<palabra.length; i++){
                    letra = palabra.substr(i,1);
                    miLetra = new Letra(x, y, lon, lon, letra);
                    miLetra.dibuja();
                    letras_array.push(miLetra);
                    x += lon + margen;
                }
            }

            /* dibujar cadalzo y partes del pj segun sea el caso */
            function horca(errores){
                var imagen = new Image();
                imagen.src = "imagenes/ahorcado"+errores+".png";
                imagen.onload = function(){
                    ctx.drawImage(imagen, 390, 0, 230, 230);
                }

            }

            /* ajustar coordenadas */
            function ajusta(xx, yy){
                var posCanvas = canvas.getBoundingClientRect();
                var x = xx-posCanvas.left;
                var y = yy-posCanvas.top;
                return{x:x, y:y}
            }

            /* Detecta tecla clickeada y la compara con las de la palabra ya elegida al azar */
            function selecciona(e){
                var pos = ajusta(e.clientX, e.clientY);
                var x = pos.x;
                var y = pos.y;
                var tecla;
                var bandera = false;
                for (var i = 0; i < teclas_array.length; i++){
                    tecla = teclas_array[i];
                    if (tecla.x > 0){
                        if ((x > tecla.x) && (x < tecla.x + tecla.ancho) && (y > tecla.y) && (y < tecla.y + tecla.alto)){
                            break;
                        }
                    }
                }
                if (i < teclas_array.length){
                    for (var i = 0 ; i < palabra.length ; i++){
                        letra = palabra.substr(i, 1);
                        if (letra == tecla.letra){ /* comparamos y vemos si acerto la letra */
                            caja = letras_array[i];
                            caja.dibujaLetra();
                            aciertos++;
                            bandera = true;
                        }
                    }
                    if (bandera == false){ /* Si falla aumenta los errores y checa si perdio para mandar a la funcion gameover */
                        errores++;
                        horca(errores);
                        if (errores == 5) gameOver(errores);
                    }
                    /* Borra la tecla que se a presionado */
                    ctx.clearRect(tecla.x - 1, tecla.y - 1, tecla.ancho + 2, tecla.alto + 2);
                    tecla.x - 1;
                    /* checa si se gano y manda a la funcion gameover */
                    if (aciertos == palabra.length) gameOver(errores);
                }
            }

            /* Borramos las teclas y la palabra con sus cajas y mandamos msj segun el caso si se gano o se perdio */
            function gameOver(errores){
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                ctx.fillStyle = "black";

                ctx.font = "bold 30px Courier";
                if (errores < 5){
                    ctx.fillText("Excelente, la palabra es: ", 250, 280);
                } else {
                    ctx.fillText("No exactamente, la palabra era: ", 200, 280);
                }

                ctx.font = "bold 80px Courier";
                lon = (canvas.width - (palabra.length*48))/2;
                ctx.fillText(palabra, lon, 380);
                horca(errores);
            }

            /* Detectar si se a cargado nuestro contexco en el canvas, iniciamos las funciones necesarias para jugar o se le manda msj de error segun sea el caso */
            window.onload = function(){
                canvas = document.getElementById("pantalla");
                if (canvas && canvas.getContext){
                    ctx = canvas.getContext("2d");
                    if(ctx){
                        teclado();
                        pintaPalabra();
                        horca(errores);
                        canvas.addEventListener("click", selecciona, false);
                    } else {
                        alert ("Error al cargar el contexto!");
                    }
                }
            }
        </script>
        <!--Integrar scripts CDN-->
        <script src="../js/jquery-3.5.1.min.js"></script>
        <script src="../js/bootstrap.min.js"></script>
    </body>
</html>
